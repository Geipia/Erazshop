<!doctype html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ErazShop</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#ff6a00;
  --bg:#f4f4f4;
  --card:#ffffff;
  --text:#333;
  --price:#28a745;
  --border:rgba(0,0,0,.1);
  --img-bg:rgba(0,0,0,.05);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#121212;
    --card:#1e1e1e;
    --text:#e0e0e0;
    --border:rgba(255,255,255,.12);
    --img-bg:rgba(255,255,255,.05);
  }
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* HEADER */
header{
  background:var(--card);
  text-align:center;
  padding:1.2rem 1rem;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
}

header img{
  height:50px;
}

header h1{
  margin:.4rem 0 0;
}

/* SEARCH */
.search{
  padding:1rem;
  text-align:center;
}

.search input{
  width:100%;
  max-width:420px;
  padding:.8rem 1rem;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:1rem;
  background:var(--card);
  color:var(--text);
  outline:none;
}

.search input:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 4px rgba(255,106,0,.2);
}

/* PRODUCTS */
.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:1.2rem;
  padding:1rem;
  max-width:1200px;
  margin:auto;
}

.product{
  background:var(--card);
  border-radius:16px;
  padding:1rem;
  border:1px solid var(--border);
  position:relative;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
}

/* IMAGE : cadre rempli visuellement + image enti√®re */
.product img{
  width:100%;
  height:220px;
  object-fit:contain;            /* ‚úÖ image enti√®re */
  background:var(--img-bg);      /* ‚úÖ ‚Äúremplit‚Äù le cadre */
  padding:12px;                  /* ‚úÖ respire */
  border-radius:12px;
  margin-bottom:.7rem;
}

/* BADGES */
.badge-sale{
  position:absolute;
  top:10px;
  left:10px;
  background:var(--accent);
  color:white;
  padding:6px 10px;
  font-size:.75rem;
  font-weight:700;
  border-radius:999px;
}

.badge-best{
  position:absolute;
  top:10px;
  right:10px;
  background:#ffd700;
  color:#000;
  padding:6px 10px;
  font-size:.75rem;
  font-weight:700;
  border-radius:999px;
}

/* TEXT */
.product h2{
  font-size:1rem;
  margin:.3rem 0;
  color:var(--text);
}

.price{
  display:flex;
  gap:8px;
  justify-content:center;
  margin:.4rem 0;
  align-items:baseline;
}

.old{
  text-decoration:line-through;
  opacity:.6;
}

.current{
  color:var(--price);
  font-weight:700;
}

.desc{
  font-size:.9rem;
  text-align:center;
  opacity:.95;
}

/* MOBILE OPTIMISATION */
@media(max-width:600px){
  header img{height:44px}
  .products{padding:.8rem; gap:1rem}
  .product{padding:.95rem}
  .product img{height:240px}
}

/* FOOTER */
footer{
  text-align:center;
  padding:2rem 1rem;
  font-size:.8rem;
  opacity:.8;
}

/* ‚úÖ POPUP SOLDES */
.popup-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  z-index:9999;
}

.popup{
  width:min(520px, 92vw);
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:18px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
  padding:18px 18px 14px;
  position:relative;
  text-align:center;
}

.popup h3{
  margin:6px 0 8px;
  font-size:1.2rem;
}

.popup p{
  margin:0 0 12px;
  opacity:.9;
  line-height:1.35;
}

.popup .badge{
  display:inline-block;
  background:var(--accent);
  color:#fff;
  padding:6px 10px;
  border-radius:999px;
  font-weight:700;
  font-size:.85rem;
}

.popup .actions{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:10px;
}

.popup button{
  border:0;
  padding:10px 14px;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
}

.popup .primary{
  background:var(--accent);
  color:#fff;
}

.popup .secondary{
  background:transparent;
  color:var(--text);
  border:1px solid var(--border);
}

.popup .close{
  position:absolute;
  top:10px;
  right:12px;
  width:36px;
  height:36px;
  border-radius:10px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  font-size:18px;
  line-height:1;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <img src="logo.png" alt="ErazShop">
  <h1>ErazShop</h1>
</header>

<div class="search">
  <input id="searchInput" type="text" placeholder="Rechercher un produit‚Ä¶">
</div>

<div class="products" id="products">

  <!-- GOURDE -->
  <div class="product" data-name="gourde airup retro olfaction best seller">
    <div class="badge-sale">-25%</div>
    <div class="badge-best">‚≠ê BEST SELLER</div>
    <img src="images/gourde.jpeg" alt="Gourde AirUp">
    <h2>Gourde AirUp</h2>
    <div class="price">
      <span class="old">53,32 ‚Ç¨</span>
      <span class="current">39,99 ‚Ç¨</span>
    </div>
    <p class="desc">Gourde sans sucre √† r√©tro-olfaction.</p>

    <!-- Stripe -->
    <div style="display:flex;justify-content:center;margin-top:.6rem;">
      <stripe-buy-button
        buy-button-id="buy_btn_1Rc4TZCOWsHWoBEG4Qt0KaJB"
        publishable-key="pk_live_51Rb21ICOWsHWoBEGmAY8BEDjuDe7KjsHoTY4hzhve9aiZd0tUaQoaIEG3aoGHHnwjtc8VrEBDJrIZReI0CTVLYqQ00fikEjr67">
      </stripe-buy-button>
    </div>
  </div>

  <!-- BASKETS -->
  <div class="product" data-name="baskets reactive sport">
    <div class="badge-sale">-25%</div>
    <img src="images/basket.jpg" alt="Baskets REACTIVE">
    <h2>Baskets REACTIVE‚Ñ¢</h2>
    <div class="price">
      <span class="old">33,20 ‚Ç¨</span>
      <span class="current">24,90 ‚Ç¨</span>
    </div>
    <p class="desc">Confort moderne et respirant.</p>

    <!-- Stripe -->
    <div style="display:flex;justify-content:center;margin-top:.6rem;">
      <stripe-buy-button
        buy-button-id="buy_btn_1Rc5XsCOWsHWoBEG2nv9HMNE"
        publishable-key="pk_live_51Rb21ICOWsHWoBEGmAY8BEDjuDe7KjsHoTY4hzhve9aiZd0tUaQoaIEG3aoGHHnwjtc8VrEBDJrIZReI0CTVLYqQ00fikEjr67">
      </stripe-buy-button>
    </div>
  </div>

  <!-- CASQUE -->
  <div class="product" data-name="casque bluetooth p47 sans fil">
    <div class="badge-sale">-25%</div>
    <img src="images/casque.jpeg" alt="Casque Bluetooth P47">
    <h2>Casque Bluetooth P47</h2>
    <div class="price">
      <span class="old">26,65 ‚Ç¨</span>
      <span class="current">19,99 ‚Ç¨</span>
    </div>
    <p class="desc">Bluetooth 5.0, pliable.</p>

    <!-- Stripe -->
    <div style="display:flex;justify-content:center;margin-top:.6rem;">
      <stripe-buy-button
        buy-button-id="buy_btn_1Rc8nOCOWsHWoBEGmQVZnG10"
        publishable-key="pk_live_51Rb21ICOWsHWoBEGmAY8BEDjuDe7KjsHoTY4hzhve9aiZd0tUaQoaIEG3aoGHHnwjtc8VrEBDJrIZReI0CTVLYqQ00fikEjr67">
      </stripe-buy-button>
    </div>
  </div>

  <!-- HUMIDIFICATEUR -->
  <div class="product" data-name="humidificateur led multicolore zen">
    <div class="badge-sale">-25%</div>
    <img src="images/humidificateur.jpeg" alt="Humidificateur LED">
    <h2>Humidificateur LED</h2>
    <div class="price">
      <span class="old">39,99 ‚Ç¨</span>
      <span class="current">29,99 ‚Ç¨</span>
    </div>
    <p class="desc">Lumi√®re apaisante & air sain.</p>

    <!-- Stripe -->
    <div style="display:flex;justify-content:center;margin-top:.6rem;">
      <stripe-buy-button
        buy-button-id="buy_btn_1RcUVBCOWsHWoBEGCNEdp9Ah"
        publishable-key="pk_live_51Rb21ICOWsHWoBEGmAY8BEDjuDe7KjsHoTY4hzhve9aiZd0tUaQoaIEG3aoGHHnwjtc8VrEBDJrIZReI0CTVLYqQ00fikEjr67">
      </stripe-buy-button>
    </div>
  </div>

</div>

<footer>
  ¬© 2025 ‚Äì ErazShop
</footer>

<!-- ‚úÖ POPUP -->
<div class="popup-overlay" id="salePopup" aria-hidden="true" style="display:none;">
  <div class="popup" role="dialog" aria-modal="true" aria-label="Promotion">
    <button class="close" id="closePopup" aria-label="Fermer">‚úï</button>

    <span class="badge">üéÑ OFFRE F√äTES</span>
    <h3>-25% sur tous les produits !</h3>
    <p>Profite des promotions de fin d‚Äôann√©e : <strong>-25% minimum</strong> sur toute la boutique.</p>

    <div class="actions">
      <button class="primary" id="shopNow">Voir les produits</button>
      <button class="secondary" id="dismissPopup">Plus tard</button>
    </div>
  </div>
</div>

<!-- Stripe charg√© une seule fois -->
<script async src="https://js.stripe.com/v3/buy-button.js"></script>

<script>
  // üîç Recherche
  const searchInput = document.getElementById("searchInput");
  const cards = Array.from(document.querySelectorAll(".product"));

  function normalizeText(str){
    return (str || "").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");
  }

  searchInput.addEventListener("input", () => {
    const q = normalizeText(searchInput.value.trim());
    cards.forEach(card => {
      const name = normalizeText(card.getAttribute("data-name"));
      card.style.display = (q === "" || name.includes(q)) ? "" : "none";
    });
  });

  // ‚úÖ Popup : 1 fois par jour
  const popupKey = "erazshop_sale_popup_last_seen";

  function showPopup(){
    const overlay = document.getElementById("salePopup");
    overlay.style.display = "flex";
    overlay.setAttribute("aria-hidden","false");
    document.body.style.overflow = "hidden";
  }

  function hidePopup(){
    const overlay = document.getElementById("salePopup");
    overlay.style.display = "none";
    overlay.setAttribute("aria-hidden","true");
    document.body.style.overflow = "";
  }

  function canShowPopup(){
    const last = localStorage.getItem(popupKey);
    if(!last) return true;
    const lastDate = new Date(parseInt(last,10));
    const now = new Date();
    return lastDate.toDateString() !== now.toDateString();
  }

  window.addEventListener("load", () => {
    if(canShowPopup()){
      showPopup();
      localStorage.setItem(popupKey, Date.now().toString());
    }
  });

  document.getElementById("closePopup").addEventListener("click", hidePopup);
  document.getElementById("dismissPopup").addEventListener("click", hidePopup);

  document.getElementById("salePopup").addEventListener("click", (e) => {
    if(e.target.id === "salePopup") hidePopup();
  });

  document.getElementById("shopNow").addEventListener("click", () => {
    hidePopup();
    document.getElementById("products").scrollIntoView({behavior:"smooth", block:"start"});
  });

  window.addEventListener("keydown", (e) => {
    if(e.key === "Escape") hidePopup();
  });
</script>

</body>
</html>